
!function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){!function(c){function f(a){var b=this;b.col="undefined"==typeof a.col?-1:a.col,b.value=a.value,b.results=a.results,b.tb=a.tb,b.fb=a.fb}function g(a,b){if("undefined"==typeof a.tb.results&&g(a.tb,b),"undefined"==typeof a.fb.results&&g(a.fb,b),"undefined"!=typeof a.tb.results&&"undefined"!=typeof a.fb.results){var c=[],d=[],e=[];Object.keys(a.tb.results).forEach(function(b){for(var d=0;d<a.tb.results[b];d++)c.push([b]),e.push([b])}),Object.keys(a.fb.results).forEach(function(b){for(var c=0;c<a.fb.results[b];c++)d.push([b]),e.push([b])});var f=1*c.length/e.length,h=k(e)-f*k(c)-(1-f)*k(d);b>h&&(a.tb=void 0,a.fb=void 0,a.results=l(e))}}function h(a,b){if("undefined"!=typeof b.results)return b.results;var e,c=a[b.col];return e=d.isNumber(c)?c>=b.value?b.tb:b.fb:c===b.value?b.tb:b.fb,h(a,e)}function i(a,b){b=b||"","undefined"!=typeof a.results?console.log(a.results):(console.log(a.col+":"+a.value+"? "),c.stdout.write(b+"T->"),i(a.tb,b+"  "),c.stdout.write(b+"F->"),i(a.fb,b+"  "))}function j(a,b){if(0==a.length)return new f;var e,g,i,k,c=b(a),d=0,h=a[0].length-1;for(i=0;h>i;i++){var n={};for(k=0;k<a.length;k++)n[a[k][i]]=1;var o=Object.keys(n);for(k=0;k<o.length;k++){var p=m(a,i,o[k]),q=1*p[0].length/a.length,r=c-q*b(p[0])-(1-q)*b(p[1]);r>d&&p[0].length>0&&p[1].length>0&&(d=r,e=[i,o[k]],g=p)}}if(d>0){var s=j(g[0],b),t=j(g[1],b);return new f({col:e[0],value:e[1],tb:s,fb:t})}return new f({results:l(a)})}function k(a){var f,b=function(a){return Math.log(a)/Math.log(2)},c=l(a),d=0,e=Object.keys(c);for(f=0;f<e.length;f++){var g=1*c[e[f]]/a.length;d-=1*g*b(g)}return d}function l(a){var c,b={};for(c=0;c<a.length;c++){var d=a[c][a[c].length-1];"undefined"==typeof b[d]&&(b[d]=0),b[d]++}return b}function m(a,b,c){var e;e=d.isNumber(c)?function(a){return a[b]>=c}:function(a){return a[b]===c};var h,f=[],g=[];for(h=0;h<a.length;h++)e(a[h])?f.push(a[h]):g.push(a[h]);return[f,g]}var d=a("./utils");d.math,f.prototype.print=function(){var a=this;i(a,"")},DecisionTree=b.exports=function(a){var b=this;b.data=a.data,b.result=a.result},DecisionTree.prototype.build=function(){var d,b=this,c=[];for(d=0;d<b.data.length;d++)c.push(b.data[d]),c[d].push(b.result[d]);return b.tree=j(c,k),b.tree},DecisionTree.prototype.print=function(){var a=this;i(a.tree,"")},DecisionTree.prototype.classify=function(a){var b=this;return h(a,b.tree)},DecisionTree.prototype.prune=function(a){var b=this;g(b.tree,a)},DecisionTree.prototype.getTree=function(){return this.tree}}.call(this,a("0NpzKc"))},{"./utils":12,"0NpzKc":13}],2:[function(a,b){var d=a("./utils").math;HiddenLayer=b.exports=function(a){var b=this;if(b.input=a.input,"undefined"==typeof a.W){var c=1/a.n_in;a.W=d.randMat(a.n_in,a.n_out,-c,c)}"undefined"==typeof a.b&&(a.b=d.zeroVec(a.n_out)),"undefined"==typeof a.activation&&(a.activation=d.sigmoid),b.W=a.W,b.b=a.b,b.activation=a.activation},HiddenLayer.prototype.output=function(a){var b=this;"undefined"!=typeof a&&(b.input=a);var c=d.addMatVec(d.mulMat(b.input,b.W),b.b);return d.activateMat(c,b.activation)},HiddenLayer.prototype.linearOutput=function(a){var b=this;"undefined"!=typeof a&&(b.input=a);var c=d.addMatVec(d.mulMat(b.input,b.W),b.b);return c},HiddenLayer.prototype.backPropagate=function(a){var b=this;if("undefined"==typeof a)throw new Error("No BackPropagation Input.");var c=d.mulMat(a,m.transpose(b.W));return c},HiddenLayer.prototype.sampleHgivenV=function(a){var b=this;"undefined"!=typeof a&&(b.input=a);var c=b.output(),e=d.probToBinaryMat(c);return e}},{"./utils":12}],3:[function(a,b){var d=a("./utils").math;LogisticRegression=b.exports=function(a){var b=this;b.x=a.input,b.y=a.label,b.W=d.zeroMat(a.n_in,a.n_out),b.b=d.zeroVec(a.n_out),b.settings={"log level":1}},LogisticRegression.prototype.train=function(a){var b=this,c=.1,e=200;"undefined"!=typeof a.input&&(b.x=a.input),"undefined"!=typeof a.lr&&(c=a.lr),"undefined"!=typeof a.epochs&&(e=a.epochs);var f,g=1;for(f=0;e>f;f++){var h=d.softmaxMat(d.addMatVec(d.mulMat(b.x,b.W),b.b)),i=d.minusMat(b.y,h),j=d.mulMat(d.transpose(b.x),i),k=d.meanMatAxis(i,0);if(b.W=d.addMat(b.W,d.mulMatScalar(j,c)),b.b=d.addVec(b.b,d.mulVecScalar(k,c)),b.settings["log level"]>0){var l=100*(1*f/e);l>g&&(console.log("LogisticRegression",l.toFixed(0),"% Completed."),g++)}}b.settings["log level"]>0&&console.log("LogisticRegression Final Cross Entropy : ",b.getReconstructionCrossEntropy())},LogisticRegression.prototype.getReconstructionCrossEntropy=function(){var a=this,b=d.softmaxMat(d.addMatVec(d.mulMat(a.x,a.W),a.b)),c=d.mulMatElementWise(a.y,d.activateMat(b,Math.log)),e=d.mulMatElementWise(d.mulMatScalar(d.addMatScalar(a.y,-1),-1),d.activateMat(d.mulMatScalar(d.addMatScalar(b,-1),-1),Math.log)),f=-d.meanVec(d.sumMatAxis(d.addMat(c,e),1));return f},LogisticRegression.prototype.predict=function(a){var b=this;return d.softmaxMat(d.addMatVec(d.mulMat(a,b.W),b.b))},LogisticRegression.prototype.set=function(a,b){var c=this;c.settings[a]=b}},{"./utils":12}],4:[function(a,b){function f(a){return"undefined"==typeof a?d.euclidean:"function"==typeof a?a:"euclidean"===a.type?d.euclidean:"pearson"===a.type?d.pearson:void 0}var d=a("./utils").math;Kmeans=b.exports,Kmeans.cluster=function(a){var b=a.data,c=a.k,d=f(a.distance),g=a.epochs,h=a.init_using_data;h=!0;var j,k,l,m,i=e(b,c,h),n=[];for(k=0;c>k;k++)n.push([]);for(j=0;g>j;j++){for(n=[],k=0;c>k;k++)n.push([]);for(k=0;k<b.length;k++){var o=0;for(l=0;c>l;l++)d(i[l],b[k])<d(i[o],b[k])&&(o=l);n[o].push(k)}for(k=0;c>k;k++){var p=[];for(l=0;l<b[0].length;l++)p.push(0);if(n[k].length>0){for(l=0;l<n[k].length;l++)for(m=0;m<b[0].length;m++)p[m]+=b[n[k][l]][m];for(l=0;l<b[0].length;l++)p[l]/=n[k].length;i[k]=p}}}return{clusters:n,means:i}};var e=function(a,b,c){var e=[];if(c){var f=d.range(a.length);for(f=d.shuffle(f),g=0;b>g;g++)e.push(a[f[g]])}else{var g,h,i=[];for(g=0;g<a[0].length;g++){var j=a[0][g],k=a[0][g];for(h=0;h<a.length;h++)a[h][g]<j&&(j=a[h][g]),a[h][g]>k&&(k=a[h][g]);i.push([j,k])}for(g=0;b>g;g++){var l=[];for(h=0;h<a[0].length;h++)l.push(Math.random()*(i[h][1]-i[h][0])+i[h][0]);e.push(l)}}return e}},{"./utils":12}],5:[function(a,b){function e(a){return"undefined"==typeof a?function(a){var b=10;return Math.exp(-1*a*a/(2*b*b))}:"function"==typeof a?a:"gaussian"===a.type?function(b){var c=a.sigma;return Math.exp(-1*b*b/(2*c*c))}:"none"===a.type?function(){return 1}:void 0}function f(a){return"undefined"==typeof a?d.euclidean:"function"==typeof a?a:"euclidean"===a.type?d.euclidean:"pearson"===a.type?d.pearson:void 0}var d=a("./utils").math;KNN=b.exports=function(a){var b=this;b.data=a.data,b.result=a.result},KNN.prototype.predict=function(a){var j,b=this,c=a.x,d=a.k||3,g=e(a.weightf),h=f(a.distance),i=[];for(j=0;j<b.data.length;j++)i.push([h(c,b.data[j]),j]);i.sort(function(a,b){return a[0]-b[0]});var m,k=0,l=0;for(j=0;d>j;j++){var n=i[j][0],o=i[j][1];m=g(n),k+=m*b.result[o],l+=m}return k/=l}},{"./utils":12}],6:[function(a,b){ml=b.exports,ml.kmeans=a("./kmeans"),ml.KNN=a("./knn"),ml.SVM=a("./svm"),ml.nmf=a("./nmf"),ml.optimize=a("./optimize"),ml.MLP=a("./mlp"),ml.DecisionTree=a("./DecisionTree"),ml.LogisticRegression=a("./LogisticRegression")},{"./DecisionTree":1,"./LogisticRegression":3,"./kmeans":4,"./knn":5,"./mlp":8,"./nmf":9,"./optimize":10,"./svm":11}],7:[function(b,c){m=c.exports,m.randn=function(){var a,b,c;do a=2*Math.random()-1,b=2*Math.random()-1,c=a*a+b*b;while(c>=1||0==c);return c=Math.sqrt(-2*Math.log(c)/c),a*c},m.shape=function(a){var b=a.length,c=a[0].length;return[b,c]},m.addVec=function(a,b){if(a.length===b.length){var d,c=[];for(d=0;d<a.length;d++)c.push(a[d]+b[d]);return c}throw new Error("Length Error : not same.")},m.minusVec=function(a,b){if(a.length===b.length){var d,c=[];for(d=0;d<a.length;d++)c.push(a[d]-b[d]);return c}throw new Error("Length Error : not same.")},m.addMatScalar=function(a,b){var e,f,c=m.shape(a)[0],d=m.shape(a)[1],g=[];for(e=0;c>e;e++){var h=[];for(f=0;d>f;f++)h.push(a[e][f]+b);g.push(h)}return g},m.addMatVec=function(a,b){if(a[0].length===b.length){var d,c=[];for(d=0;d<a.length;d++)c.push(m.addVec(a[d],b));return c}throw new Error("Length Error : not same.")},m.minusMatVec=function(a,b){if(a[0].length===b.length){var d,c=[];for(d=0;d<a.length;d++)c.push(m.minusVec(a[d],b));return c}throw new Error("Length Error : not same.")},m.addMat=function(a,b){if(a.length===b.length&&a[0].length===b[0].length){for(var c=new Array(a.length),d=0;d<a.length;d++){c[d]=new Array(a[d].length);for(var e=0;e<a[d].length;e++)c[d][e]=a[d][e]+b[d][e]}return c}throw new Error("Matrix mismatch.")},m.minusMat=function(a,b){if(a.length===b.length&&a[0].length===b[0].length){for(var c=new Array(a.length),d=0;d<a.length;d++){c[d]=new Array(a[d].length);for(var e=0;e<a[d].length;e++)c[d][e]=a[d][e]-b[d][e]}return c}throw new Error("Matrix mismatch.")},m.transpose=function(a){for(var b=new Array(a[0].length),c=0;c<a[0].length;c++){b[c]=new Array(a.length);for(var d=0;d<a.length;d++)b[c][d]=a[d][c]}return b},m.dotVec=function(a,b){if(a.length===b.length){for(var c=0,d=0;d<a.length;d++)c+=a[d]*b[d];return c}throw new Error("Vector mismatch")},m.outerVec=function(a,b){var c=m.transpose([a]),d=[b];return m.mulMat(c,d)},m.mulVecScalar=function(a,b){var c,d=[];for(c=0;c<a.length;c++)d.push(a[c]*b);return d},m.mulMatScalar=function(a,b){var e,f,c=m.shape(a)[0],d=m.shape(a)[1],g=[];for(e=0;c>e;e++){var h=[];for(f=0;d>f;f++)h.push(a[e][f]*b);g.push(h)}return g},m.mulMatElementWise=function(a,b){if(a.length===b.length&&a[0].length===b[0].length){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=new Array(a[0].length);for(var e=0;e<c.length;e++)for(var f=0;f<c[e].length;f++)c[e][f]=a[e][f]*b[e][f];return c}throw new Error("Matrix shape error : not same")},m.mulMat=function(a,b){if(a[0].length===b.length){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=new Array(b[0].length);for(var e=m.transpose(b),f=0;f<c.length;f++)for(var g=0;g<c[f].length;g++)c[f][g]=m.dotVec(a[f],e[g]);return c}throw new Error("Array mismatch")},m.sumVec=function(a){for(var b=0,c=a.length;c--;)b+=a[c];return b},m.sumMat=function(a){for(var b=0,c=a.length;c--;)for(var d=0;d<a[0].length;d++)b+=a[c][d];return b},m.sumMatAxis=function(a,b){if(1===b){var d,c=m.shape(a)[0],e=[];for(d=0;c>d;d++)e.push(m.sumVec(a[d]));return e}return mat_T=m.transpose(a),m.sumMatAxis(mat_T,1)},m.meanVec=function(a){return 1*m.sumVec(a)/a.length},m.meanMat=function(a){var b=a.length,c=a[0].length;return 1*m.sumMat(a)/(b*c)},m.meanMatAxis=function(a,b){if(1===b){var d,c=m.shape(a)[0],e=[];for(d=0;c>d;d++)e.push(m.meanVec(a[d]));return e}return mat_T=m.transpose(a),m.meanMatAxis(mat_T,1)},m.squareVec=function(a){var c,b=[];for(c=0;c<a.length;c++)b.push(a[c]*a[c]);return b},m.squareMat=function(a){var c,b=[];for(c=0;c<a.length;c++)b.push(m.squareVec(a[c]));return b},m.minVec=function(a){for(var b=a[0],c=a.length;c--;)a[c]<b&&(b=a[c]);return b},m.maxVec=function(a){for(var b=a[0],c=a.length;c--;)a[c]>b&&(b=a[c]);return b},m.minMat=function(a){for(var b=a[0][0],c=a.length;c--;)for(var d=0;d<a[0].length;d++)a[c][d]<b&&(b=a[c][d]);return b},m.maxMat=function(a){for(var b=a[0][0],c=a.length;c--;)for(var d=0;d<a[0].length;d++)a[c][d]<b&&(b=a[c][d]);return b},m.zeroVec=function(a){for(var b=[];b.length<a;)b.push(0);return b},m.zeroMat=function(a,b){for(var c=[];c.length<a;)c.push(m.zeroVec(b));return c},m.oneVec=function(a){for(var b=[];b.length<a;)b.push(1);return b},m.oneMat=function(a,b){for(var c=[];c.length<a;)c.push(m.oneVec(b));return c},m.randVec=function(a,b,c){b="undefined"!=typeof b?b:0,c="undefined"!=typeof c?c:1;for(var d=[];d.length<a;)d.push(b+(c-b)*Math.random());return d},m.randMat=function(a,b,c,d){c="undefined"!=typeof c?c:0,d="undefined"!=typeof d?d:1;for(var e=[];e.length<a;)e.push(m.randVec(b,c,d));return e},m.randnVec=function(a,b,c){for(var d=[];d.length<a;)d.push(b+c*m.randn());return d},m.randnMat=function(a,b,c,d){for(var e=[];e.length<a;)e.push(m.randnVec(b,c,d));return e},m.identity=function(a){for(var b=new Array(a),c=0;a>c;c++){b[c]=new Array(a);for(var d=0;a>d;d++)b[c][d]=c===d?1:0}return b},m.sigmoid=function(a){var b=1/(1+Math.exp(-a));return 1==b?b=.99999999999999:0==b&&(b=1e-14),b},m.dSigmoid=function(b){return a=m.sigmoid(b),a*(1-a)},m.probToBinaryMat=function(a){var d,e,b=m.shape(a)[0],c=m.shape(a)[1],f=[];for(d=0;b>d;d++){var g=[];for(e=0;c>e;e++)Math.random()<a[d][e]?g.push(1):g.push(0);f.push(g)}return f},m.activateVec=function(a,b){var c,d=[];for(c=0;c<a.length;c++)d.push(b(a[c]));return d},m.activateMat=function(a,b){var e,f,c=m.shape(a)[0],d=m.shape(a)[1],g=[];for(e=0;c>e;e++){var h=[];for(f=0;d>f;f++)h.push(b(a[e][f]));g.push(h)}return g},m.activateTwoVec=function(a,b,c){if(a.length===b.length){for(var d=new Array(a.length),e=0;e<d.length;e++)d[e]=c(a[e],b[e]);return d}throw new Error("Matrix shape error : not same")},m.activateTwoMat=function(a,b,c){if(a.length===b.length&&a[0].length===b[0].length){for(var d=new Array(a.length),e=0;e<a.length;e++)d[e]=new Array(a[0].length);for(var f=0;f<d.length;f++)for(var g=0;g<d[f].length;g++)d[f][g]=c(a[f][g],b[f][g]);return d}throw new Error("Matrix shape error : not same")},m.fillVec=function(a,b){for(var c=[];c.length<a;)c.push(b);return c},m.fillMat=function(a,b,c){for(var d=[];d.length<a;){for(var e=[];e.length<b;)e.push(c);d.push(e)}return d},m.softmaxVec=function(a){var b=m.maxVec(a),c=m.activateVec(a,function(a){return Math.exp(a-b)});return m.activateVec(c,function(a){return a/m.sumVec(c)})},m.softmaxMat=function(a){var c,b=[];for(c=0;c<a.length;c++)b.push(m.softmaxVec(a[c]));return b},m.randInt=function(a,b){var c=Math.random()*(b-a+.9999)+a;return Math.floor(c)},m.normalizeVec=function(a){var b,c=[],d=0;for(b=0;b<a.length;b++)d+=a[b];for(b=0;b<a.length;b++)c.push(1*a[b]/d);return c},m.euclidean=function(a,b){var c,d=0;for(c=0;c<a.length;c++){var e=a[c]-b[c];d+=e*e}return Math.sqrt(d)},m.pearson=function(a,b){for(var c=[],d=[],e=[],f=0;f<a.length;f++)c.push(a[f]*b[f]),d.push(a[f]*a[f]),e.push(b[f]*b[f]);for(var g=0,h=0,i=0,j=0,k=0,f=0;f<a.length;f++)g+=a[f],h+=b[f],i+=c[f],j+=d[f],k+=e[f];var l=a.length*i-g*h,m=a.length*j-g*g,n=a.length*k-h*h,o=Math.sqrt(m*n),p=l/o;return p},m.getNormVec=function(a){var b,c=0;for(b=0;b<a.length;b++)c+=a[b]*a[b];return Math.sqrt(c)},m.gaussian=function(a,b){return b=b||10,Math.exp(-1*a*a/(2*b*b))},m.meanVecs=function(a){var c,b=m.zeroVec(a[0].length);for(c=0;c<a.length;c++)b=m.addVec(b,a[c]);return m.activateVec(b,function(b){return 1*b/a.length})},m.covarianceVecs=function(a){var d,b=m.zeroMat(a[0].length,a[0].length),c=m.meanVecs(a);for(d=0;d<a.length;d++){var e=m.minusVec(a[d],c);b=m.addMat(b,m.mulMat(m.transpose([e]),[e]))}return m.activateMat(b,function(b){return 1*b/(a.length-1)})},m.shuffle=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);for(var d,e,c=b.length;c;d=parseInt(Math.random()*c),e=b[--c],b[c]=b[d],b[d]=e);return b},m.range=function(a,b,c){var d=[];"undefined"==typeof c&&(c=1),"undefined"==typeof b&&(b=a,a=0);for(var e=a;b>e;e+=c)d.push(e);return d}},{}],8:[function(a,b){var d=a("./utils").math;HiddenLayer=a("./HiddenLayer"),MLP=b.exports=function(a){var b=this;b.x=a.input,b.y=a.label,b.sigmoidLayers=[],b.nLayers=a.hidden_layer_sizes.length,b.settings={"log level":1};var c;for(c=0;c<b.nLayers+1;c++){var e,f;e=0==c?a.n_ins:a.hidden_layer_sizes[c-1],f=0==c?b.x:b.sigmoidLayers[b.sigmoidLayers.length-1].sampleHgivenV();var g;g=c==b.nLayers?new HiddenLayer({input:f,n_in:e,n_out:a.n_outs,activation:d.sigmoid,W:"undefined"==typeof a.w_array?void 0:a.w_array[c],b:"undefined"==typeof a.b_array?void 0:a.b_array[c]}):new HiddenLayer({input:f,n_in:e,n_out:a.hidden_layer_sizes[c],activation:d.sigmoid,W:"undefined"==typeof a.w_array?void 0:a.w_array[c],b:"undefined"==typeof a.b_array?void 0:a.b_array[c]}),b.sigmoidLayers.push(g)}},MLP.prototype.train=function(a){var b=this,c=.6,d=1e3;"undefined"!=typeof a.lr&&(c=a.lr),"undefined"!=typeof a.epochs&&(d=a.epochs);var e,f=1;for(e=0;d>e;e++){var g,h=[];for(h.push(b.x),g=0;g<b.nLayers+1;g++)h.push(b.sigmoidLayers[g].output(h[g]));var i=h[b.nLayers+1],j=new Array(b.nLayers+1);for(j[b.nLayers]=m.mulMatElementWise(m.minusMat(b.y,i),m.activateMat(b.sigmoidLayers[b.nLayers].linearOutput(h[b.nLayers]),m.dSigmoid)),g=b.nLayers-1;g>=0;g--)j[g]=m.mulMatElementWise(b.sigmoidLayers[g+1].backPropagate(j[g+1]),m.activateMat(b.sigmoidLayers[g].linearOutput(h[g]),m.dSigmoid));for(var g=0;g<b.nLayers+1;g++){var k=m.activateMat(m.mulMat(m.transpose(h[g]),j[g]),function(a){return 1*a/b.x.length}),l=m.meanMatAxis(j[g],0);b.sigmoidLayers[g].W=m.addMat(b.sigmoidLayers[g].W,k),b.sigmoidLayers[g].b=m.addVec(b.sigmoidLayers[g].b,l)}if(b.settings["log level"]>0){var n=100*(1*e/d);n>f&&(console.log("MLP",n.toFixed(0),"% Completed."),f+=8)}}b.settings["log level"]>0&&console.log("MLP Final Cross Entropy : ",b.getReconstructionCrossEntropy())},MLP.prototype.getReconstructionCrossEntropy=function(){var a=this,b=a.predict(a.x),c=d.activateTwoMat(a.y,b,function(a,b){return a*Math.log(b)}),e=d.activateTwoMat(a.y,b,function(a,b){return(1-a)*Math.log(1-b)}),f=-d.meanVec(d.sumMatAxis(d.addMat(c,e),1));return f},MLP.prototype.predict=function(a){var b=this,c=a;for(i=0;i<b.nLayers+1;i++)c=b.sigmoidLayers[i].output(c);return c},MLP.prototype.set=function(a,b){var c=this;c.settings[a]=b}},{"./HiddenLayer":2,"./utils":12}],9:[function(a,b){var d=a("./utils"),e=d.math;nmf=b.exports,nmf.factorize=function(a){var j,b=a.features,c=a.matrix,d=a.epochs,f=e.shape(c)[0],g=e.shape(c)[1],h=e.randMat(f,b,0,1),i=e.randMat(b,g,0,1);for(j=0;d>j;j++){e.mulMat(h,i);var l=e.mulMat(e.transpose(h),c),m=e.mulMat(e.mulMat(e.transpose(h),h),i);i=e.activateTwoMat(e.mulMatElementWise(i,l),m,function(a,b){return a/b});var n=e.mulMat(c,e.transpose(i)),o=e.mulMat(e.mulMat(h,i),e.transpose(i));h=e.activateTwoMat(e.mulMatElementWise(h,n),o,function(a,b){return a/b})}return[h,i]}},{"./utils":12}],10:[function(a,b){var d=a("./utils").math;optimize=b.exports,optimize.hillclimb=function(a){var e,b=a.domain,c=a.costf,f=[];for(e=0;e<b.length;e++)f.push(d.randInt(b[e][0],b[e][1]));for(var g,h;;){var e,j,i=[];for(e=0;e<b.length;e++)if(f[e]>b[e][0]){var k=[];for(j=0;j<b.length;j++)k.push(f[j]);k[e]-=1,i.push(k)}else if(f[e]<b[e][1]){var k=[];for(j=0;j<b.length;j++)k.push(f[j]);k[e]+=1,i.push(k)}for(g=c(f),h=g,e=0;e<i.length;e++){var l=c(i[e]);h>l&&(h=l,f=i[e])}if(h===g)break}return f},optimize.anneal=function(a){var i,b=a.domain,c=a.costf,e=a.temperature,f=a.cool,g=a.step,j=[];for(i=0;i<b.length;i++)j.push(d.randInt(b[i][0],b[i][1]));for(;e>.1;){var k=d.randInt(0,b.length-1),l=d.randInt(-g,g),m=[];for(i=0;i<j.length;i++)m.push(j[i]);m[k]+=l,m[k]<b[k][0]&&(m[k]=b[k][0]),m[k]>b[k][1]&&(m[k]=b[k][1]);var n=c(j),o=c(m),p=Math.exp(-1*(o-n)/e);(n>o||Math.random()<p)&&(j=m),e*=f}return j},optimize.genetic=function(a){function s(a){var f,c=d.randInt(0,b.length-1),e=[];for(f=0;f<b.length;f++)e.push(a[f]);return e[c]+=Math.random()<.5?1:-1,e[c]<b[c][0]&&(e[c]=b[c][0]),e[c]>b[c][1]&&(e[c]=b[c][1]),e}function t(a,c){var g,e=d.randInt(0,b.length-2),f=[];for(g=0;e>g;g++)f.push(a[g]);for(g=e;g<b.length;g++)f.push(c[g]);return f}function u(a){var c,b=[0];for(c=0;c<a.length;c++)b.push(b[c]+a[c]);var d=Math.random();for(c=0;c<b.length;c++)if(d>b[c]&&d<=b[c+1])return c;return-1}var i,j,b=a.domain,c=a.costf,e=a.population,f=a.q||.3,g=a.elite||.04*e,h=a.epochs||100,k=[];for(i=0;e>i;i++){var l=[];for(j=0;j<b.length;j++)l.push(d.randInt(b[j][0],b[j][1]));k.push(l)}for(k.sort(function(a,b){return c(a)-c(b)}),i=0;h>i;i++){var m=[];for(j=0;g>j;j++)m.push(k[j]);var n=[];for(j=0;j<k.length;j++)n[j]=f*Math.pow(1-f,j);for(n=d.normalizeVec(n),j=0;j<k.length-g;j++){var o=u(n),p=u(n),q=t(k[o],k[p]),r=s(q);m.push(r)}k=m,k.sort(function(a,b){return c(a)-c(b)})}return k[0]}},{"./utils":12}],11:[function(a,b){function e(a){return"undefined"==typeof a?function(a,b){var c=1;return Math.exp(-1*Math.pow(d.getNormVec(d.minusVec(a,b)),2)/(2*c*c))}:"function"==typeof a?a:"gaussian"===a.type?function(b,c){var e=a.sigma;return Math.exp(-1*Math.pow(d.getNormVec(d.minusVec(b,c)),2)/(2*e*e))}:"linear"===a.type?function(a,b){return d.dotVec(a,b)}:"polynomial"===a.type?function(b,c){var e=a.c,f=a.d;return Math.pow(d.dotVec(b,c)+e,f)}:void 0}var d=a("./utils").math;SVM=b.exports=function(a){var b=this;b.x=a.x,b.y=a.y},SVM.prototype.train=function(a){var b=this,c=a.C||1,f=a.tol||1e-4,g=a.max_passes||20,h=a.alpha_tol||1e-5;b.kernel=e(a.kernel),b.alphas=d.zeroVec(b.x.length),b.b=0;for(var j,i=0;g>i;){var l=0;for(j=0;j<b.x.length;j++){var m=b.f(b.x[j])-b.y[j];if(b.y[j]*m<-f&&b.alphas[j]<c||b.y[j]*m>f&&b.alphas[j]>0){var n=d.randInt(0,b.x.length-1);j==n&&(n=(n+1)%b.x.length);var r,s,o=b.f(b.x[n])-b.y[n],p=b.alphas[j],q=b.alphas[n];if(b.y[j]!==b.y[n]?(r=Math.max(0,b.alphas[n]-b.alphas[j]),s=Math.min(c,c+b.alphas[n]-b.alphas[j])):(r=Math.max(0,b.alphas[n]+b.alphas[j]-c),s=Math.min(c,b.alphas[n]+b.alphas[j])),r===s)continue;var t=2*b.kernel(b.x[j],b.x[n])-b.kernel(b.x[j],b.x[j])-b.kernel(b.x[n],b.x[n]);if(t>=0)continue;if(b.alphas[n]-=1*b.y[n]*(m-o)/t,b.alphas[n]>s?b.alphas[n]=s:b.alphas[n]<r&&(b.alphas[n]=r),Math.abs(b.alphas[n]-q)<h)continue;b.alphas[j]+=b.y[j]*b.y[n]*(q-b.alphas[n]);var u=b.b-m-b.y[j]*(b.alphas[j]-p)*b.kernel(b.x[j],b.x[j])-b.y[n]*(b.alphas[n]-q)*b.kernel(b.x[j],b.x[n]),v=b.b-o-b.y[j]*(b.alphas[j]-p)*b.kernel(b.x[j],b.x[n])-b.y[n]*(b.alphas[n]-q)*b.kernel(b.x[n],b.x[n]);b.b=0<b.alphas[j]&&b.alphas[j]<c?u:0<b.alphas[n]&&b.alphas[n]<c?v:(u+v)/2,l++}}0==l?i++:i=0}},SVM.prototype.predict=function(a){var b=this;return b.f(a)>=0?1:-1},SVM.prototype.f=function(a){var d,b=this,c=0;for(d=0;d<b.x.length;d++)c+=b.alphas[d]*b.y[d]*b.kernel(b.x[d],a);return c+=b.b}},{"./utils":12}],12:[function(a,b){utils=b.exports,utils.math=a("./math"),utils.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)}},{"./math":7}],13:[function(a,b){function e(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=e,d.addListener=e,d.once=e,d.off=e,d.removeListener=e,d.removeAllListeners=e,d.emit=e,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[6]);

function readData(t){var r=[],n=[];$.ajaxPrefilter(function(t){if(t.crossDomain&&jQuery.support.cors){var r="http:"===window.location.protocol?"http:":"https:";t.url=r+"//cors-anywhere.herokuapp.com/"+t.url}}),$.get("https://bahadorsaket.com/others/ranking.txt",function(e){allText=e;for(var a=allText.split(/\r\n|\n/),o=a[0].split(","),i=1;i<a.length;i++){var s=a[i].split(",");s.length==o.length&&(r.push([s[0],s[1],s[2],s[3]]),n.push(s[4]))}t(n,r)})}function getChartPeformance(t,r){readData(function(n,e){var a=new ml.DecisionTree({data:e,result:n});a.build();var o=getRecommendations(t,e,n,a);r(o)})}function checkTaskValidity(t){return"Retrieve"==t||"Anomalies"==t||"Cluster"==t||"Correlations"==t||"Derived"==t||"Distribution"==t||"Extremum"==t||"Filter"==t||"Order"==t||"Range"==t}function getRecommendations(t,r,n,e,a){var o=["PieChart","BarChart","LineChart","Scatterplot","Table"];for(VisRanking={},j=0;j<o.length;j++){"Numerical"!=t[1]&&"Nominal"!=t[1]&&"Ordinal"!=t[1]&&console.log("Parameter 2 is incorrect! Accepted data attributes [Ordinal,Nominal,Numerical]"),"Numerical"!=t[2]&&"Nominal"!=t[2]&&"Ordinal"!=t[2]&&console.log("Parameter 3 is incorrect! Accepted data attributes [Ordinal,Nominal,Numerical]"),"Numerical"==t[1]||"Numerical"==t[2]?"Numerical"!=t[2]&&(t[1]=t[2],t[2]="Numerical"):("Ordinal"==t[1]&&"Nominal"==t[2]&&(t[1]="Nominal",t[2]="Numerical"),"Ordinal"==t[1]&&"Ordinal"==t[2]&&(t[1]="Ordinal",t[2]="Numerical"),"Nominal"==t[1]&&"Nominal"==t[2]&&(t[1]="Nominal",t[2]="Numerical"),"Nominal"==t[1]&&"Ordinal"==t[2]&&(t[1]="Nominal",t[2]="Numerical"));var i=calculateRanking(e.classify([t[0],t[1],t[2],o[j]]));name=o[j],VisRanking[name]=i}return checkTaskValidity(t[0])?Object.keys(VisRanking).sort(function(t,r){return VisRanking[r]-VisRanking[t]}):["Invalid task type! Please pick a task first."]}function calculateRanking(t){var r=0;for(key in t)"Very Good"==key&&(r+=3*t["Very Good"]),"Good"==key&&(r+=2*t.Good),"OK"==key&&(r+=1*t.OK),"Bad"==key&&(r+=-2*t.Bad),"Very Bad"==key&&(r+=-3*t["Very Bad"]);return r}!function t(r,n,e){function a(i,s){if(!n[i]){if(!r[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var l=n[i]={exports:{}};r[i][0].call(l.exports,function(t){var n=r[i][1][t];return a(n||t)},l,l.exports,t,r,n,e)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<e.length;i++)a(e[i]);return a}({1:[function(t,r){(function(n){function e(t){var r=this;r.col=void 0===t.col?-1:t.col,r.value=t.value,r.results=t.results,r.tb=t.tb,r.fb=t.fb}function a(t,r){r=r||"",void 0!==t.results?console.log(t.results):(console.log(t.col+":"+t.value+"? "),n.stdout.write(r+"T->"),a(t.tb,r+"  "),n.stdout.write(r+"F->"),a(t.fb,r+"  "))}function o(t){var r,n,e=i(t),a=0,o=Object.keys(e);for(r=0;r<o.length;r++){var s=1*e[o[r]]/t.length;a-=1*s*(n=s,Math.log(n)/Math.log(2))}return a}function i(t){var r,n={};for(r=0;r<t.length;r++){var e=t[r][t[r].length-1];void 0===n[e]&&(n[e]=0),n[e]++}return n}function s(t,r,n){var e;e=u.isNumber(n)?function(t){return t[r]>=n}:function(t){return t[r]===n};var a,o=[],i=[];for(a=0;a<t.length;a++)e(t[a])?o.push(t[a]):i.push(t[a]);return[o,i]}var u=t("./utils");u.math,e.prototype.print=function(){a(this,"")},DecisionTree=r.exports=function(t){this.data=t.data,this.result=t.result},DecisionTree.prototype.build=function(){var t,r=this,n=[];for(t=0;t<r.data.length;t++)n.push(r.data[t]),n[t].push(r.result[t]);return r.tree=function t(r,n){if(0==r.length)return new e;var a,o,u,l,h=n(r),c=0,f=r[0].length-1;for(u=0;f>u;u++){var m={};for(l=0;l<r.length;l++)m[r[l][u]]=1;var p=Object.keys(m);for(l=0;l<p.length;l++){var g=s(r,u,p[l]),v=1*g[0].length/r.length,d=h-v*n(g[0])-(1-v)*n(g[1]);d>c&&g[0].length>0&&g[1].length>0&&(c=d,a=[u,p[l]],o=g)}}if(c>0){var y=t(o[0],n),M=t(o[1],n);return new e({col:a[0],value:a[1],tb:y,fb:M})}return new e({results:i(r)})}(n,o),r.tree},DecisionTree.prototype.print=function(){a(this.tree,"")},DecisionTree.prototype.classify=function(t){return function t(r,n){if(void 0!==n.results)return n.results;var e=r[n.col];return t(r,u.isNumber(e)?e>=n.value?n.tb:n.fb:e===n.value?n.tb:n.fb)}(t,this.tree)},DecisionTree.prototype.prune=function(t){!function t(r,n){if(void 0===r.tb.results&&t(r.tb,n),void 0===r.fb.results&&t(r.fb,n),void 0!==r.tb.results&&void 0!==r.fb.results){var e=[],a=[],s=[];Object.keys(r.tb.results).forEach(function(t){for(var n=0;n<r.tb.results[t];n++)e.push([t]),s.push([t])}),Object.keys(r.fb.results).forEach(function(t){for(var n=0;n<r.fb.results[t];n++)a.push([t]),s.push([t])});var u=1*e.length/s.length;n>o(s)-u*o(e)-(1-u)*o(a)&&(r.tb=void 0,r.fb=void 0,r.results=i(s))}}(this.tree,t)},DecisionTree.prototype.getTree=function(){return this.tree}}).call(this,t("0NpzKc"))},{"./utils":12,"0NpzKc":13}],2:[function(t,r){var n=t("./utils").math;HiddenLayer=r.exports=function(t){if(this.input=t.input,void 0===t.W){var r=1/t.n_in;t.W=n.randMat(t.n_in,t.n_out,-r,r)}void 0===t.b&&(t.b=n.zeroVec(t.n_out)),void 0===t.activation&&(t.activation=n.sigmoid),this.W=t.W,this.b=t.b,this.activation=t.activation},HiddenLayer.prototype.output=function(t){var r=this;void 0!==t&&(r.input=t);var e=n.addMatVec(n.mulMat(r.input,r.W),r.b);return n.activateMat(e,r.activation)},HiddenLayer.prototype.linearOutput=function(t){return void 0!==t&&(this.input=t),n.addMatVec(n.mulMat(this.input,this.W),this.b)},HiddenLayer.prototype.backPropagate=function(t){if(void 0===t)throw new Error("No BackPropagation Input.");return n.mulMat(t,m.transpose(this.W))},HiddenLayer.prototype.sampleHgivenV=function(t){void 0!==t&&(this.input=t);var r=this.output();return n.probToBinaryMat(r)}},{"./utils":12}],3:[function(t,r){var n=t("./utils").math;LogisticRegression=r.exports=function(t){var r=this;r.x=t.input,r.y=t.label,r.W=n.zeroMat(t.n_in,t.n_out),r.b=n.zeroVec(t.n_out),r.settings={"log level":1}},LogisticRegression.prototype.train=function(t){var r=this,e=.1,a=200;void 0!==t.input&&(r.x=t.input),void 0!==t.lr&&(e=t.lr),void 0!==t.epochs&&(a=t.epochs);var o,i=1;for(o=0;a>o;o++){var s=n.softmaxMat(n.addMatVec(n.mulMat(r.x,r.W),r.b)),u=n.minusMat(r.y,s),l=n.mulMat(n.transpose(r.x),u),h=n.meanMatAxis(u,0);if(r.W=n.addMat(r.W,n.mulMatScalar(l,e)),r.b=n.addVec(r.b,n.mulVecScalar(h,e)),r.settings["log level"]>0){var c=1*o/a*100;c>i&&(console.log("LogisticRegression",c.toFixed(0),"% Completed."),i++)}}r.settings["log level"]>0&&console.log("LogisticRegression Final Cross Entropy : ",r.getReconstructionCrossEntropy())},LogisticRegression.prototype.getReconstructionCrossEntropy=function(){var t=this,r=n.softmaxMat(n.addMatVec(n.mulMat(t.x,t.W),t.b)),e=n.mulMatElementWise(t.y,n.activateMat(r,Math.log)),a=n.mulMatElementWise(n.mulMatScalar(n.addMatScalar(t.y,-1),-1),n.activateMat(n.mulMatScalar(n.addMatScalar(r,-1),-1),Math.log));return-n.meanVec(n.sumMatAxis(n.addMat(e,a),1))},LogisticRegression.prototype.predict=function(t){return n.softmaxMat(n.addMatVec(n.mulMat(t,this.W),this.b))},LogisticRegression.prototype.set=function(t,r){this.settings[t]=r}},{"./utils":12}],4:[function(t,r){var n=t("./utils").math;Kmeans=r.exports,Kmeans.cluster=function(t){var r,a=t.data,o=t.k,i=void 0===(r=t.distance)?n.euclidean:"function"==typeof r?r:"euclidean"===r.type?n.euclidean:"pearson"===r.type?n.pearson:void 0,s=t.epochs;t.init_using_data;var u,l,h,c,f=e(a,o,!0),m=[];for(l=0;o>l;l++)m.push([]);for(u=0;s>u;u++){for(m=[],l=0;o>l;l++)m.push([]);for(l=0;l<a.length;l++){var p=0;for(h=0;o>h;h++)i(f[h],a[l])<i(f[p],a[l])&&(p=h);m[p].push(l)}for(l=0;o>l;l++){var g=[];for(h=0;h<a[0].length;h++)g.push(0);if(m[l].length>0){for(h=0;h<m[l].length;h++)for(c=0;c<a[0].length;c++)g[c]+=a[m[l][h]][c];for(h=0;h<a[0].length;h++)g[h]/=m[l].length;f[l]=g}}}return{clusters:m,means:f}};var e=function(t,r,e){var a=[];if(e){var o=n.range(t.length);for(o=n.shuffle(o),i=0;r>i;i++)a.push(t[o[i]])}else{var i,s,u=[];for(i=0;i<t[0].length;i++){var l=t[0][i],h=t[0][i];for(s=0;s<t.length;s++)t[s][i]<l&&(l=t[s][i]),t[s][i]>h&&(h=t[s][i]);u.push([l,h])}for(i=0;r>i;i++){var c=[];for(s=0;s<t[0].length;s++)c.push(Math.random()*(u[s][1]-u[s][0])+u[s][0]);a.push(c)}}return a}},{"./utils":12}],5:[function(t,r){var n=t("./utils").math;KNN=r.exports=function(t){this.data=t.data,this.result=t.result},KNN.prototype.predict=function(t){var r,e,a,o=t.x,i=t.k||3,s=void 0===(a=t.weightf)?function(t){return Math.exp(-1*t*t/200)}:"function"==typeof a?a:"gaussian"===a.type?function(t){var r=a.sigma;return Math.exp(-1*t*t/(2*r*r))}:"none"===a.type?function(){return 1}:void 0,u=void 0===(e=t.distance)?n.euclidean:"function"==typeof e?e:"euclidean"===e.type?n.euclidean:"pearson"===e.type?n.pearson:void 0,l=[];for(r=0;r<this.data.length;r++)l.push([u(o,this.data[r]),r]);l.sort(function(t,r){return t[0]-r[0]});var h,c=0,f=0;for(r=0;i>r;r++){var m=l[r][0],p=l[r][1];c+=(h=s(m))*this.result[p],f+=h}return c/f}},{"./utils":12}],6:[function(t,r){ml=r.exports,ml.kmeans=t("./kmeans"),ml.KNN=t("./knn"),ml.SVM=t("./svm"),ml.nmf=t("./nmf"),ml.optimize=t("./optimize"),ml.MLP=t("./mlp"),ml.DecisionTree=t("./DecisionTree"),ml.LogisticRegression=t("./LogisticRegression")},{"./DecisionTree":1,"./LogisticRegression":3,"./kmeans":4,"./knn":5,"./mlp":8,"./nmf":9,"./optimize":10,"./svm":11}],7:[function(t,r){m=r.exports,m.randn=function(){var t,r,n;do{t=2*Math.random()-1,r=2*Math.random()-1,n=t*t+r*r}while(n>=1||0==n);return t*(n=Math.sqrt(-2*Math.log(n)/n))},m.shape=function(t){return[t.length,t[0].length]},m.addVec=function(t,r){if(t.length===r.length){var n,e=[];for(n=0;n<t.length;n++)e.push(t[n]+r[n]);return e}throw new Error("Length Error : not same.")},m.minusVec=function(t,r){if(t.length===r.length){var n,e=[];for(n=0;n<t.length;n++)e.push(t[n]-r[n]);return e}throw new Error("Length Error : not same.")},m.addMatScalar=function(t,r){var n,e,a=m.shape(t)[0],o=m.shape(t)[1],i=[];for(n=0;a>n;n++){var s=[];for(e=0;o>e;e++)s.push(t[n][e]+r);i.push(s)}return i},m.addMatVec=function(t,r){if(t[0].length===r.length){var n,e=[];for(n=0;n<t.length;n++)e.push(m.addVec(t[n],r));return e}throw new Error("Length Error : not same.")},m.minusMatVec=function(t,r){if(t[0].length===r.length){var n,e=[];for(n=0;n<t.length;n++)e.push(m.minusVec(t[n],r));return e}throw new Error("Length Error : not same.")},m.addMat=function(t,r){if(t.length===r.length&&t[0].length===r[0].length){for(var n=new Array(t.length),e=0;e<t.length;e++){n[e]=new Array(t[e].length);for(var a=0;a<t[e].length;a++)n[e][a]=t[e][a]+r[e][a]}return n}throw new Error("Matrix mismatch.")},m.minusMat=function(t,r){if(t.length===r.length&&t[0].length===r[0].length){for(var n=new Array(t.length),e=0;e<t.length;e++){n[e]=new Array(t[e].length);for(var a=0;a<t[e].length;a++)n[e][a]=t[e][a]-r[e][a]}return n}throw new Error("Matrix mismatch.")},m.transpose=function(t){for(var r=new Array(t[0].length),n=0;n<t[0].length;n++){r[n]=new Array(t.length);for(var e=0;e<t.length;e++)r[n][e]=t[e][n]}return r},m.dotVec=function(t,r){if(t.length===r.length){for(var n=0,e=0;e<t.length;e++)n+=t[e]*r[e];return n}throw new Error("Vector mismatch")},m.outerVec=function(t,r){var n=m.transpose([t]),e=[r];return m.mulMat(n,e)},m.mulVecScalar=function(t,r){var n,e=[];for(n=0;n<t.length;n++)e.push(t[n]*r);return e},m.mulMatScalar=function(t,r){var n,e,a=m.shape(t)[0],o=m.shape(t)[1],i=[];for(n=0;a>n;n++){var s=[];for(e=0;o>e;e++)s.push(t[n][e]*r);i.push(s)}return i},m.mulMatElementWise=function(t,r){if(t.length===r.length&&t[0].length===r[0].length){for(var n=new Array(t.length),e=0;e<t.length;e++)n[e]=new Array(t[0].length);for(var a=0;a<n.length;a++)for(var o=0;o<n[a].length;o++)n[a][o]=t[a][o]*r[a][o];return n}throw new Error("Matrix shape error : not same")},m.mulMat=function(t,r){if(t[0].length===r.length){for(var n=new Array(t.length),e=0;e<t.length;e++)n[e]=new Array(r[0].length);for(var a=m.transpose(r),o=0;o<n.length;o++)for(var i=0;i<n[o].length;i++)n[o][i]=m.dotVec(t[o],a[i]);return n}throw new Error("Array mismatch")},m.sumVec=function(t){for(var r=0,n=t.length;n--;)r+=t[n];return r},m.sumMat=function(t){for(var r=0,n=t.length;n--;)for(var e=0;e<t[0].length;e++)r+=t[n][e];return r},m.sumMatAxis=function(t,r){if(1===r){var n,e=m.shape(t)[0],a=[];for(n=0;e>n;n++)a.push(m.sumVec(t[n]));return a}return mat_T=m.transpose(t),m.sumMatAxis(mat_T,1)},m.meanVec=function(t){return 1*m.sumVec(t)/t.length},m.meanMat=function(t){var r=t.length,n=t[0].length;return 1*m.sumMat(t)/(r*n)},m.meanMatAxis=function(t,r){if(1===r){var n,e=m.shape(t)[0],a=[];for(n=0;e>n;n++)a.push(m.meanVec(t[n]));return a}return mat_T=m.transpose(t),m.meanMatAxis(mat_T,1)},m.squareVec=function(t){var r,n=[];for(r=0;r<t.length;r++)n.push(t[r]*t[r]);return n},m.squareMat=function(t){var r,n=[];for(r=0;r<t.length;r++)n.push(m.squareVec(t[r]));return n},m.minVec=function(t){for(var r=t[0],n=t.length;n--;)t[n]<r&&(r=t[n]);return r},m.maxVec=function(t){for(var r=t[0],n=t.length;n--;)t[n]>r&&(r=t[n]);return r},m.minMat=function(t){for(var r=t[0][0],n=t.length;n--;)for(var e=0;e<t[0].length;e++)t[n][e]<r&&(r=t[n][e]);return r},m.maxMat=function(t){for(var r=t[0][0],n=t.length;n--;)for(var e=0;e<t[0].length;e++)t[n][e]<r&&(r=t[n][e]);return r},m.zeroVec=function(t){for(var r=[];r.length<t;)r.push(0);return r},m.zeroMat=function(t,r){for(var n=[];n.length<t;)n.push(m.zeroVec(r));return n},m.oneVec=function(t){for(var r=[];r.length<t;)r.push(1);return r},m.oneMat=function(t,r){for(var n=[];n.length<t;)n.push(m.oneVec(r));return n},m.randVec=function(t,r,n){r=void 0!==r?r:0,n=void 0!==n?n:1;for(var e=[];e.length<t;)e.push(r+(n-r)*Math.random());return e},m.randMat=function(t,r,n,e){n=void 0!==n?n:0,e=void 0!==e?e:1;for(var a=[];a.length<t;)a.push(m.randVec(r,n,e));return a},m.randnVec=function(t,r,n){for(var e=[];e.length<t;)e.push(r+n*m.randn());return e},m.randnMat=function(t,r,n,e){for(var a=[];a.length<t;)a.push(m.randnVec(r,n,e));return a},m.identity=function(t){for(var r=new Array(t),n=0;t>n;n++){r[n]=new Array(t);for(var e=0;t>e;e++)r[n][e]=n===e?1:0}return r},m.sigmoid=function(t){var r=1/(1+Math.exp(-t));return 1==r?r=.99999999999999:0==r&&(r=1e-14),r},m.dSigmoid=function(t){return a=m.sigmoid(t),a*(1-a)},m.probToBinaryMat=function(t){var r,n,e=m.shape(t)[0],a=m.shape(t)[1],o=[];for(r=0;e>r;r++){var i=[];for(n=0;a>n;n++)Math.random()<t[r][n]?i.push(1):i.push(0);o.push(i)}return o},m.activateVec=function(t,r){var n,e=[];for(n=0;n<t.length;n++)e.push(r(t[n]));return e},m.activateMat=function(t,r){var n,e,a=m.shape(t)[0],o=m.shape(t)[1],i=[];for(n=0;a>n;n++){var s=[];for(e=0;o>e;e++)s.push(r(t[n][e]));i.push(s)}return i},m.activateTwoVec=function(t,r,n){if(t.length===r.length){for(var e=new Array(t.length),a=0;a<e.length;a++)e[a]=n(t[a],r[a]);return e}throw new Error("Matrix shape error : not same")},m.activateTwoMat=function(t,r,n){if(t.length===r.length&&t[0].length===r[0].length){for(var e=new Array(t.length),a=0;a<t.length;a++)e[a]=new Array(t[0].length);for(var o=0;o<e.length;o++)for(var i=0;i<e[o].length;i++)e[o][i]=n(t[o][i],r[o][i]);return e}throw new Error("Matrix shape error : not same")},m.fillVec=function(t,r){for(var n=[];n.length<t;)n.push(r);return n},m.fillMat=function(t,r,n){for(var e=[];e.length<t;){for(var a=[];a.length<r;)a.push(n);e.push(a)}return e},m.softmaxVec=function(t){var r=m.maxVec(t),n=m.activateVec(t,function(t){return Math.exp(t-r)});return m.activateVec(n,function(t){return t/m.sumVec(n)})},m.softmaxMat=function(t){var r,n=[];for(r=0;r<t.length;r++)n.push(m.softmaxVec(t[r]));return n},m.randInt=function(t,r){var n=Math.random()*(r-t+.9999)+t;return Math.floor(n)},m.normalizeVec=function(t){var r,n=[],e=0;for(r=0;r<t.length;r++)e+=t[r];for(r=0;r<t.length;r++)n.push(1*t[r]/e);return n},m.euclidean=function(t,r){var n,e=0;for(n=0;n<t.length;n++){var a=t[n]-r[n];e+=a*a}return Math.sqrt(e)},m.pearson=function(t,r){for(var n=[],e=[],a=[],o=0;o<t.length;o++)n.push(t[o]*r[o]),e.push(t[o]*t[o]),a.push(r[o]*r[o]);var i=0,s=0,u=0,l=0,h=0;for(o=0;o<t.length;o++)i+=t[o],s+=r[o],u+=n[o],l+=e[o],h+=a[o];var c=t.length*u-i*s,f=t.length*l-i*i,m=t.length*h-s*s;return c/Math.sqrt(f*m)},m.getNormVec=function(t){var r,n=0;for(r=0;r<t.length;r++)n+=t[r]*t[r];return Math.sqrt(n)},m.gaussian=function(t,r){return r=r||10,Math.exp(-1*t*t/(2*r*r))},m.meanVecs=function(t){var r,n=m.zeroVec(t[0].length);for(r=0;r<t.length;r++)n=m.addVec(n,t[r]);return m.activateVec(n,function(r){return 1*r/t.length})},m.covarianceVecs=function(t){var r,n=m.zeroMat(t[0].length,t[0].length),e=m.meanVecs(t);for(r=0;r<t.length;r++){var a=m.minusVec(t[r],e);n=m.addMat(n,m.mulMat(m.transpose([a]),[a]))}return m.activateMat(n,function(r){return 1*r/(t.length-1)})},m.shuffle=function(t){for(var r=[],n=0;n<t.length;n++)r.push(t[n]);var e,a;for(n=r.length;n;e=parseInt(Math.random()*n),a=r[--n],r[n]=r[e],r[e]=a);return r},m.range=function(t,r,n){var e=[];void 0===n&&(n=1),void 0===r&&(r=t,t=0);for(var a=t;r>a;a+=n)e.push(a);return e}},{}],8:[function(t,r){var n=t("./utils").math;HiddenLayer=t("./HiddenLayer"),MLP=r.exports=function(t){var r,e=this;for(e.x=t.input,e.y=t.label,e.sigmoidLayers=[],e.nLayers=t.hidden_layer_sizes.length,e.settings={"log level":1},r=0;r<e.nLayers+1;r++){var a,o,i;a=0==r?t.n_ins:t.hidden_layer_sizes[r-1],o=0==r?e.x:e.sigmoidLayers[e.sigmoidLayers.length-1].sampleHgivenV(),i=r==e.nLayers?new HiddenLayer({input:o,n_in:a,n_out:t.n_outs,activation:n.sigmoid,W:void 0===t.w_array?void 0:t.w_array[r],b:void 0===t.b_array?void 0:t.b_array[r]}):new HiddenLayer({input:o,n_in:a,n_out:t.hidden_layer_sizes[r],activation:n.sigmoid,W:void 0===t.w_array?void 0:t.w_array[r],b:void 0===t.b_array?void 0:t.b_array[r]}),e.sigmoidLayers.push(i)}},MLP.prototype.train=function(t){var r=this,n=1e3;void 0!==t.lr&&t.lr,void 0!==t.epochs&&(n=t.epochs);var e,a=1;for(e=0;n>e;e++){var o=[];for(o.push(r.x),u=0;u<r.nLayers+1;u++)o.push(r.sigmoidLayers[u].output(o[u]));var i=o[r.nLayers+1],s=new Array(r.nLayers+1);for(s[r.nLayers]=m.mulMatElementWise(m.minusMat(r.y,i),m.activateMat(r.sigmoidLayers[r.nLayers].linearOutput(o[r.nLayers]),m.dSigmoid)),u=r.nLayers-1;u>=0;u--)s[u]=m.mulMatElementWise(r.sigmoidLayers[u+1].backPropagate(s[u+1]),m.activateMat(r.sigmoidLayers[u].linearOutput(o[u]),m.dSigmoid));for(var u=0;u<r.nLayers+1;u++){var l=m.activateMat(m.mulMat(m.transpose(o[u]),s[u]),function(t){return 1*t/r.x.length}),h=m.meanMatAxis(s[u],0);r.sigmoidLayers[u].W=m.addMat(r.sigmoidLayers[u].W,l),r.sigmoidLayers[u].b=m.addVec(r.sigmoidLayers[u].b,h)}if(r.settings["log level"]>0){var c=1*e/n*100;c>a&&(console.log("MLP",c.toFixed(0),"% Completed."),a+=8)}}r.settings["log level"]>0&&console.log("MLP Final Cross Entropy : ",r.getReconstructionCrossEntropy())},MLP.prototype.getReconstructionCrossEntropy=function(){var t=this.predict(this.x),r=n.activateTwoMat(this.y,t,function(t,r){return t*Math.log(r)}),e=n.activateTwoMat(this.y,t,function(t,r){return(1-t)*Math.log(1-r)});return-n.meanVec(n.sumMatAxis(n.addMat(r,e),1))},MLP.prototype.predict=function(t){var r=t;for(i=0;i<this.nLayers+1;i++)r=this.sigmoidLayers[i].output(r);return r},MLP.prototype.set=function(t,r){this.settings[t]=r}},{"./HiddenLayer":2,"./utils":12}],9:[function(t,r){var n=t("./utils").math;nmf=r.exports,nmf.factorize=function(t){var r,e=t.features,a=t.matrix,o=t.epochs,i=n.shape(a)[0],s=n.shape(a)[1],u=n.randMat(i,e,0,1),l=n.randMat(e,s,0,1);for(r=0;o>r;r++){n.mulMat(u,l);var h=n.mulMat(n.transpose(u),a),c=n.mulMat(n.mulMat(n.transpose(u),u),l);l=n.activateTwoMat(n.mulMatElementWise(l,h),c,function(t,r){return t/r});var f=n.mulMat(a,n.transpose(l)),m=n.mulMat(n.mulMat(u,l),n.transpose(l));u=n.activateTwoMat(n.mulMatElementWise(u,f),m,function(t,r){return t/r})}return[u,l]}},{"./utils":12}],10:[function(t,r){var n=t("./utils").math;optimize=r.exports,optimize.hillclimb=function(t){var r,e,a=t.domain,o=t.costf,i=[];for(s=0;s<a.length;s++)i.push(n.randInt(a[s][0],a[s][1]));for(;;){var s,u,l=[];for(s=0;s<a.length;s++)if(i[s]>a[s][0]){var h=[];for(u=0;u<a.length;u++)h.push(i[u]);h[s]-=1,l.push(h)}else if(i[s]<a[s][1]){h=[];for(u=0;u<a.length;u++)h.push(i[u]);h[s]+=1,l.push(h)}for(e=r=o(i),s=0;s<l.length;s++){var c=o(l[s]);e>c&&(e=c,i=l[s])}if(e===r)break}return i},optimize.anneal=function(t){var r,e=t.domain,a=t.costf,o=t.temperature,i=t.cool,s=t.step,u=[];for(r=0;r<e.length;r++)u.push(n.randInt(e[r][0],e[r][1]));for(;o>.1;){var l=n.randInt(0,e.length-1),h=n.randInt(-s,s),c=[];for(r=0;r<u.length;r++)c.push(u[r]);c[l]+=h,c[l]<e[l][0]&&(c[l]=e[l][0]),c[l]>e[l][1]&&(c[l]=e[l][1]);var f=a(u),m=a(c),p=Math.exp(-1*(m-f)/o);(f>m||Math.random()<p)&&(u=c),o*=i}return u},optimize.genetic=function(t){function r(t){var r,e=n.randInt(0,s.length-1),a=[];for(r=0;r<s.length;r++)a.push(t[r]);return a[e]+=Math.random()<.5?1:-1,a[e]<s[e][0]&&(a[e]=s[e][0]),a[e]>s[e][1]&&(a[e]=s[e][1]),a}function e(t,r){var e,a=n.randInt(0,s.length-2),o=[];for(e=0;a>e;e++)o.push(t[e]);for(e=a;e<s.length;e++)o.push(r[e]);return o}function a(t){var r,n=[0];for(r=0;r<t.length;r++)n.push(n[r]+t[r]);var e=Math.random();for(r=0;r<n.length;r++)if(e>n[r]&&e<=n[r+1])return r;return-1}var o,i,s=t.domain,u=t.costf,l=t.population,h=t.q||.3,c=t.elite||.04*l,f=t.epochs||100,m=[];for(o=0;l>o;o++){var p=[];for(i=0;i<s.length;i++)p.push(n.randInt(s[i][0],s[i][1]));m.push(p)}for(m.sort(function(t,r){return u(t)-u(r)}),o=0;f>o;o++){var g=[];for(i=0;c>i;i++)g.push(m[i]);var v=[];for(i=0;i<m.length;i++)v[i]=h*Math.pow(1-h,i);for(v=n.normalizeVec(v),i=0;i<m.length-c;i++){var d=a(v),y=a(v),M=r(e(m[d],m[y]));g.push(M)}(m=g).sort(function(t,r){return u(t)-u(r)})}return m[0]}},{"./utils":12}],11:[function(t,r){var n=t("./utils").math;SVM=r.exports=function(t){this.x=t.x,this.y=t.y},SVM.prototype.train=function(t){var r,e=this,a=t.C||1,o=t.tol||1e-4,i=t.max_passes||20,s=t.alpha_tol||1e-5;e.kernel=void 0===(r=t.kernel)?function(t,r){return Math.exp(-1*Math.pow(n.getNormVec(n.minusVec(t,r)),2)/2)}:"function"==typeof r?r:"gaussian"===r.type?function(t,e){var a=r.sigma;return Math.exp(-1*Math.pow(n.getNormVec(n.minusVec(t,e)),2)/(2*a*a))}:"linear"===r.type?function(t,r){return n.dotVec(t,r)}:"polynomial"===r.type?function(t,e){var a=r.c,o=r.d;return Math.pow(n.dotVec(t,e)+a,o)}:void 0,e.alphas=n.zeroVec(e.x.length),e.b=0;for(var u,l=0;i>l;){var h=0;for(u=0;u<e.x.length;u++){var c=e.f(e.x[u])-e.y[u];if(e.y[u]*c<-o&&e.alphas[u]<a||e.y[u]*c>o&&e.alphas[u]>0){var f=n.randInt(0,e.x.length-1);u==f&&(f=(f+1)%e.x.length);var m,p,g=e.f(e.x[f])-e.y[f],v=e.alphas[u],d=e.alphas[f];if(e.y[u]!==e.y[f]?(m=Math.max(0,e.alphas[f]-e.alphas[u]),p=Math.min(a,a+e.alphas[f]-e.alphas[u])):(m=Math.max(0,e.alphas[f]+e.alphas[u]-a),p=Math.min(a,e.alphas[f]+e.alphas[u])),m===p)continue;var y=2*e.kernel(e.x[u],e.x[f])-e.kernel(e.x[u],e.x[u])-e.kernel(e.x[f],e.x[f]);if(y>=0)continue;if(e.alphas[f]-=1*e.y[f]*(c-g)/y,e.alphas[f]>p?e.alphas[f]=p:e.alphas[f]<m&&(e.alphas[f]=m),Math.abs(e.alphas[f]-d)<s)continue;e.alphas[u]+=e.y[u]*e.y[f]*(d-e.alphas[f]);var M=e.b-c-e.y[u]*(e.alphas[u]-v)*e.kernel(e.x[u],e.x[u])-e.y[f]*(e.alphas[f]-d)*e.kernel(e.x[u],e.x[f]),w=e.b-g-e.y[u]*(e.alphas[u]-v)*e.kernel(e.x[u],e.x[f])-e.y[f]*(e.alphas[f]-d)*e.kernel(e.x[f],e.x[f]);e.b=0<e.alphas[u]&&e.alphas[u]<a?M:0<e.alphas[f]&&e.alphas[f]<a?w:(M+w)/2,h++}}0==h?l++:l=0}},SVM.prototype.predict=function(t){return this.f(t)>=0?1:-1},SVM.prototype.f=function(t){var r,n=this,e=0;for(r=0;r<n.x.length;r++)e+=n.alphas[r]*n.y[r]*n.kernel(n.x[r],t);return e+n.b}},{"./utils":12}],12:[function(t,r){utils=r.exports,utils.math=t("./math"),utils.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},{"./math":7}],13:[function(t,r){function n(){}var e=r.exports={};e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(r){var n=[];return window.addEventListener("message",function(t){var r=t.source;(r===window||null===r)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)&&n.shift()()},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=n,e.addListener=n,e.once=n,e.off=n,e.removeListener=n,e.removeAllListeners=n,e.emit=n,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[6]);